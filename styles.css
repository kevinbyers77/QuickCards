:root{
  --bg: #0b0b10;
  --bg2: #0e0e15;
  --grad1: #0b0f1a;
  --grad2: #0a2118;
  --card: #12141a;
  --card-strong:#171a22;
  --text: #f2f3f5;
  --muted:#aeb3ba;
  --line:#232730;
  --brand:#16c27a;
  --brand-strong:#0fa365;
  --danger:#d44;
  --radius: 14px;
  --shadow: 0 1px 2px rgba(0,0,0,.25), 0 8px 22px rgba(0,0,0,.35);
}
/* iOS input zoom */
input, select, textarea, button { font-size:16px; line-height:1.2; }

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font:16px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  color:var(--text);
  background: radial-gradient(1200px 800px at 15% -10%, var(--grad2), transparent),
              radial-gradient(1000px 700px at 90% 10%, #15203a40, transparent),
              linear-gradient(180deg, var(--bg), var(--bg2));
}

.shell{padding:12px 14px;max-width:1100px;margin-inline:auto}

/* App bar */
.appbar{
  position:sticky;top:0;z-index:10;
  display:flex;align-items:center;justify-content:space-between;
  padding:10px 12px;
  backdrop-filter: blur(10px);
  background: color-mix(in srgb, var(--bg) 70%, transparent);
  border-bottom:1px solid var(--line);
}
.appbar h1{margin:0;font-size:1.3rem;letter-spacing:.3px}
.btn{padding:9px 12px;border-radius:10px;border:1px solid var(--line);background:#0f1117;color:var(--text)}
.btn.ghost{background:transparent}
.btn.primary{background:var(--brand);border-color:var(--brand-strong);color:#041;font-weight:600}

/* Gallery grid (denser) */
#gallery{display:grid;gap:12px;grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); padding-block:12px}
.card{
  background: linear-gradient(180deg, var(--card), var(--card-strong));
  border:1px solid var(--line);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  overflow:hidden;
  transition: transform .15s ease, box-shadow .2s ease, border-color .2s ease;
}
.card:hover{transform: translateY(-2px); border-color:#2a3140; box-shadow: 0 6px 28px rgba(0,0,0,.45)}
.thumbBtn{display:block;padding:0;border:0;background:none;cursor:pointer}
.thumb{width:100%; aspect-ratio: 3/2; object-fit:cover; display:block; background:#0a0a0a}
.meta{display:flex;align-items:center;justify-content:space-between;gap:8px;padding:8px 10px}
.name{font-weight:600;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:.95rem}
.stats{display:flex;gap:8px;align-items:center}
.chip{border:1px solid var(--line);color:var(--muted);padding:1px 6px;border-radius:999px;font-size:.72rem}
.cardMenu{display:flex;gap:8px;padding:0 10px 10px}
.cardMenu .ghost{background:transparent;border:1px solid var(--line);color:var(--text);padding:7px 9px;border-radius:10px}
.cardMenu .danger{background:#2a1616;border:1px solid #3a1c1c;color:#ffb4b4;padding:7px 9px;border-radius:10px}

/* FAB */
.fab{
  position:fixed; bottom:20px; right:20px; z-index:11;
  width:56px; height:56px; border-radius:50%;
  border:1px solid #124d36; color:#031; font-size:28px; line-height:1;
  background: radial-gradient(80px 80px at 30% 20%, #3bffb8, #0fb375);
  box-shadow: 0 10px 24px rgba(0,0,0,.45);
  cursor:pointer;
}
.fab:active{transform:translateY(1px)}

/* Dialogs */
.sheet{border:1px solid var(--line);border-radius:16px;padding:0;background:var(--card);color:var(--text)}
.sheet form{padding:18px;display:grid;gap:14px}
.sheet h2{margin:0 0 6px 0;font-size:1.1rem;color:#e9edf1}
.sheet .grid{display:grid;gap:12px}
.mt{margin-top:8px}
.row{display:flex;gap:12px;align-items:center}
.toggle{display:inline-flex;align-items:center;gap:6px;color:var(--muted);font-size:.95rem}
.sheet input[type="text"], .sheet input[type="search"], .sheet select{
  background:#0f1117;color:#fff;border:1px solid var(--line);border-radius:10px;padding:10px 12px;width:100%
}
.sheet input::placeholder{color:#9aa3ad}
.sheet menu{display:flex;justify-content:flex-end;gap:10px;margin:0}
dialog::backdrop{background:rgba(0,0,0,.55)}

.picker-label{ color:#cfd6de; font-weight:600 }
.picker-actions{ display:flex; gap:8px; margin-top:8px; flex-wrap:wrap }
.hint{ color:#9aa3ad; font-size:.9rem; margin-top:6px }

/* Barcode viewer */
#barcodeDialog.light{padding:0;border-radius:16px;border:1px solid #e8e8e8;background:#fff}
#barcodeImg{max-width:92vw;max-height:88vh;display:block}
body.bright-mode{background:#fff;color:#111}
body.bright-mode .appbar, body.bright-mode .shell, body.bright-mode .sheet{background:#fff;color:#111;border-color:#e8e8e8}
body.bright-mode .card{background:#fff;border-color:#e8e8e8}
body.bright-mode .chip{border-color:#e1e1e1;color:#333}

.footnote{color:var(--muted);padding-bottom:64px}

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  *{animation-duration:0.01ms!important; animation-iteration-count:1!important; transition-duration:0.01ms!important; scroll-behavior:auto!important;}
}
